<fieldset class="mb-4 border rounded p-3">
  <div class="mb-3" data-payment-method-target="radioGroup">
    <% if current_user.clients.any? %>
      <h6 class="mb-3">Use saved card</h6>
      <% current_user.clients.cit.each do |client| %>
        <div class="form-check mb-2">
          <input class="form-check-input"
                 type="radio"
                 id="<%= client.client_id %>"
                 name="payment_mode"
                 value="<%= client.client_id %>"
                 data-payment-method-target="radio">
          <label class="form-check-label" for="<%= client.client_id %>">
            <span class="d-inline-block fw-medium">•••• <%= client.last4 %></span>
            <small class="text-muted ms-1">(Exp: <%= client.month %>/<%= client.year %>)</small>
          </label>
        </div>
      <% end %>
    <% end %>
    <h6 class="mb-3 mt-4">Use new card</h6>
    <div class="form-check mb-2">
      <input class="form-check-input"
             type="radio"
             id="new_one_time_option"
             name="payment_mode"
             value="new_one_time"
             <%= "checked" if current_user.clients.empty? %>
             data-payment-method-target="radio">
      <label class="form-check-label" for="new_one_time_option">One-time Payment</label>
    </div>
    <div class="form-check mb-2">
      <input class="form-check-input"
             type="radio"
             id="new_secure_option"
             name="payment_mode"
             value="new_secure_web_page"
             data-payment-method-target="radio">
      <label class="form-check-label" for="new_secure_option">Secure Web Page</label>
    </div>
  </div>
  <div class="form-check mb-0" data-payment-method-target="saveCardCheckbox">
    <div class="border-top mt-3 pt-3">
      <% if @payable.class.name == "Subscription" %>
        <%= check_box_tag :cof, 'storing', true,
            class: "form-check-input",
            id: "save_card",
            disabled: true %>
        <%= hidden_field_tag :cof, 'storing' %>
        <label class="form-check-label" for="save_card">
          Save card information for future payments <br>
          <small class="text-muted">(Required for subscription payments)</small>
        </label>
      <% else %>
        <%= check_box_tag :cof, 'storing', false, class: "form-check-input", id: "save_card" %>
        <label class="form-check-label" for="save_card">
          Save card information for future payments
        </label>
      <% end %>
    </div>
  </div>
</fieldset>